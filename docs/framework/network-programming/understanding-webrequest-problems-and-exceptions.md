---
title: Noções básicas sobre problemas e exceções de WebRequest
description: WebRequest e classes derivadas geram exceções para sinalizar condições anormais. Use essas soluções possíveis para resolver essas condições no .NET Framework.
ms.date: 03/30/2017
ms.assetid: 74a361a5-e912-42d3-8f2e-8e9a96880a2b
ms.openlocfilehash: aa9ab989bad7940e82cc4fd8fd22ca3915f7b800
ms.sourcegitcommit: da21fc5a8cce1e028575acf31974681a1bc5aeed
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/08/2020
ms.locfileid: "84502074"
---
# <a name="understanding-webrequest-problems-and-exceptions"></a>Noções básicas sobre problemas e exceções de WebRequest
<xref:System.Net.WebRequest> e suas classes derivadas (<xref:System.Net.HttpWebRequest>, <xref:System.Net.FtpWebRequest> e <xref:System.Net.FileWebRequest>) geram exceções para sinalizar uma condição anormal. Às vezes, a resolução desses problemas não é óbvia.  
  
## <a name="solutions"></a>Soluções  
 Examine a propriedade <xref:System.Net.WebException.Status%2A> da <xref:System.Net.WebException> para determinar o problema. A tabela a seguir mostra vários valores de status e algumas possíveis resoluções.  
  
|Status|Detalhes|Solução|  
|------------|-------------|--------------|  
|<xref:System.Net.WebExceptionStatus.SendFailure><br /><br /> -ou-<br /><br /> <xref:System.Net.WebExceptionStatus.ReceiveFailure>|Há um problema com o soquete subjacente. A conexão pode ter sido redefinida.|Reconecte e envie a solicitação novamente.<br /><br /> Verifique se o último service pack está instalado.<br /><br /> Aumente o valor da propriedade <xref:System.Net.ServicePointManager.MaxServicePointIdleTime%2A?displayProperty=nameWithType>.<br /><br /> Defina <xref:System.Net.HttpWebRequest.KeepAlive%2A?displayProperty=nameWithType> como `false`.<br /><br /> Aumente o número de conexões máximas com a propriedade <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A>.<br /><br /> Verifique a configuração de proxy.<br /><br /> Se estiver usando o SSL, verifique se o processo do servidor tem permissão para acessar o repositório de Certificados.<br /><br /> Se estiver enviando uma grande quantidade de dados, defina <xref:System.Net.HttpWebRequest.AllowWriteStreamBuffering%2A> como `false`.|  
|<xref:System.Net.WebExceptionStatus.TrustFailure>|Não foi possível validar o certificado do servidor.|Tente abrir o URI usando o Internet Explorer. Resolva os Alertas de Segurança exibidos pelo IE. Se você não conseguir resolver o alerta de segurança, crie uma classe de política de certificação que implementa <xref:System.Net.ICertificatePolicy>, que retorna `true` e passe-o para <xref:System.Net.ServicePointManager.CertificatePolicy%2A>.<br /><br /> Consulte <https://support.microsoft.com/?id=823177>.<br /><br /> Verifique se o certificado da Autoridade de Certificação que assinou o certificado do servidor está adicionado à lista de Autoridades de Certificação Confiáveis no Internet Explorer.<br /><br /> Verifique se o nome do host na URL corresponde ao nome comum do certificado do servidor.|  
|<xref:System.Net.WebExceptionStatus.SecureChannelFailure>|Ocorreu um erro na transação SSL ou há um problema de certificado.|O .NET Framework versão 1.1 apenas dá suporte ao SSL versão 3.0. Se o servidor estiver usando apenas o TLS versão 1.0 ou o SSL versão 2.0, a exceção será gerada. Faça upgrade para o .NET Framework versão 2.0 e defina <xref:System.Net.ServicePointManager.SecurityProtocol%2A> para que ele corresponda ao servidor.<br /><br /> O certificado do cliente foi assinado por uma AC (Autoridade de Certificação) na qual o servidor não confia. Instale o certificado da AC no servidor. Consulte <https://support.microsoft.com/?id=332077>.<br /><br /> Verifique se você tem o último service pack instalado.|  
|<xref:System.Net.WebExceptionStatus.ConnectFailure>|Falha na conexão.|Um firewall ou um proxy está bloqueando a conexão. Modifique o firewall ou o proxy para permitir a conexão.<br /><br /> Designar explicitamente um <xref:System.Net.WebProxy> no aplicativo cliente chamando o <xref:System.Net.WebProxy> Construtor ( `WebServiceProxyClass.Proxy = new WebProxy("http://server:80", true)` ).<br /><br /> Execute o Filemon ou o Regmon para garantir que a identidade do processo de trabalho tenha as permissões necessárias para acessar WSPWSP.dll, HKLM\System\CurrentControlSet\Services\DnsCache ou HKLM\System\CurrentControlSet\Services\WinSock2.|  
|<xref:System.Net.WebExceptionStatus.NameResolutionFailure>|O Serviço de Nomes de Domínio não pôde resolver o nome do host.|Configure o proxy corretamente. Consulte <https://support.microsoft.com/?id=318140>.<br /><br /> Verifique se um software antivírus ou um firewall instalado não está bloqueando a conexão.|  
|<xref:System.Net.WebExceptionStatus.RequestCanceled>|<xref:System.Net.WebRequest.Abort%2A> foi chamado ou ocorreu um erro.|Esse problema pode ser causado por uma carga pesada no cliente ou no servidor. Reduza a carga.<br /><br /> Aumente a configuração do <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A>.<br /><br /> Confira <https://support.microsoft.com/?id=821268> para modificar as configurações de desempenho do serviço Web.|  
|<xref:System.Net.WebExceptionStatus.ConnectionClosed>|O aplicativo tentou gravar em um soquete que já foi fechado.|O cliente ou o servidor está sobrecarregado. Reduza a carga.<br /><br /> Aumente a configuração do <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A>.<br /><br /> Confira <https://support.microsoft.com/?id=821268> para modificar as configurações de desempenho do serviço Web.|  
|<xref:System.Net.WebExceptionStatus.MessageLengthLimitExceeded>|O limite definido (<xref:System.Net.HttpWebRequest.MaximumResponseHeadersLength%2A>) no tamanho da mensagem foi excedido.|Aumente o valor da propriedade <xref:System.Net.HttpWebRequest.MaximumResponseHeadersLength%2A>.|  
|<xref:System.Net.WebExceptionStatus.ProxyNameResolutionFailure>|O Serviço de Nomes de Domínio não pôde resolver o nome do host do proxy.|Configure o proxy corretamente. Consulte <https://support.microsoft.com/?id=318140>.<br /><br /> Force <xref:System.Net.HttpWebRequest> a não usar nenhum proxy definindo a propriedade <xref:System.Net.HttpWebRequest.Proxy%2A> como `null`.|  
|<xref:System.Net.WebExceptionStatus.ServerProtocolViolation>|A resposta do servidor não é uma resposta HTTP válida. Esse problema ocorre quando o .NET Framework detecta que a resposta do servidor não é compatível com o HTTP 1.1 RFC. Esse problema pode ocorrer quando a resposta contém cabeçalhos incorretos ou delimitadores de cabeçalho incorretos. O RFC 2616 define o HTTP 1.1 e o formato válido para a resposta do servidor. Para saber mais, confira [RFC 2616 - Hypertext Transfer Protocol – HTTP/1.1](https://tools.ietf.org/html/rfc2616) no site da [IETF (Internet Engineering Task Force)](https://www.ietf.org/).|Obtenha um rastreamento de rede da transação e examine os cabeçalhos na resposta.<br /><br /> Se o aplicativo exigir a resposta do servidor sem a análise (isso pode ser um problema de segurança), defina `useUnsafeHeaderParsing` como `true` no arquivo de configuração. Consulte [ \<httpWebRequest> elemento (configurações de rede)](../configure-apps/file-schema/network/httpwebrequest-element-network-settings.md).|  
  
## <a name="see-also"></a>Confira também

- <xref:System.Net.HttpWebRequest>
- <xref:System.Net.HttpWebResponse>
- <xref:System.Net.Dns>
